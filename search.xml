<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2022/02/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>大一上C语言小作业——2048小游戏</title>
    <url>/2022/02/24/2048/</url>
    <content><![CDATA[<h3 id="大一上C语言小作业——2048小游戏"><a href="#大一上C语言小作业——2048小游戏" class="headerlink" title="大一上C语言小作业——2048小游戏"></a>大一上C语言小作业——2048小游戏</h3><p>项目要求：使用C语言编写2048小游戏</p>
<h4 id="界面设置部分"><a href="#界面设置部分" class="headerlink" title="界面设置部分"></a>界面设置部分</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span> &#123;            <span class="comment">//隐藏光标</span></span><br><span class="line">    CONSOLE_CURSOR_INFO curInfo;</span><br><span class="line">    curInfo.dwSize = <span class="number">1</span>;</span><br><span class="line">    curInfo.bVisible = FALSE;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorInfo(handle, &amp;curInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;       <span class="comment">//光标移动到(x,y)位置</span></span><br><span class="line">    COORD pos;</span><br><span class="line">    pos.X = x;</span><br><span class="line">    pos.Y = y;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorPosition(handle, pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;title 2048&quot;</span>);        <span class="comment">//窗口标题为2048</span></span><br><span class="line">    system(<span class="string">&quot;mode con cols=40 lines=21&quot;</span>);  <span class="comment">//窗口大小</span></span><br><span class="line">    system(<span class="string">&quot;chcp 65001 &gt; nul&quot;</span>);  <span class="comment">//中文支持</span></span><br><span class="line">    HideCursor();                <span class="comment">//隐藏光标</span></span><br><span class="line">    CONSOLE_FONT_INFOEX cfi;</span><br><span class="line">    cfi.cbSize = <span class="keyword">sizeof</span> cfi;</span><br><span class="line">    cfi.nFont = <span class="number">0</span>;</span><br><span class="line">    cfi.dwFontSize.X = <span class="number">15</span>;</span><br><span class="line">    cfi.dwFontSize.Y = <span class="number">30</span>;</span><br><span class="line">    cfi.FontFamily = FF_DONTCARE;</span><br><span class="line">    cfi.FontWeight = FW_NORMAL;</span><br><span class="line">    SetCurrentConsoleFontEx(GetStdHandle(STD_OUTPUT_HANDLE), FALSE, &amp;cfi);</span><br><span class="line">    srand((<span class="type">unsigned</span>) time(<span class="literal">NULL</span>));  <span class="comment">//随机函数种子</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="游戏初始化"><a href="#游戏初始化" class="headerlink" title="游戏初始化"></a>游戏初始化</h4><p>游戏”棋盘“初始化要做的事：</p>
<ul>
<li>清空“棋盘”</li>
<li>生成两个数（2或4），其中生成2的概率较大</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span> &#123;</span><br><span class="line">    score = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(gameMap, <span class="number">-1</span>, <span class="keyword">sizeof</span>(gameMap));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (total &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;  <span class="comment">//temp 的范围是[1, 6]</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;     <span class="comment">//设置1/6的概率生成数字4</span></span><br><span class="line">        <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">            gameMap[x][y] = num;</span><br><span class="line">            total++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h4><p>2048游戏中最关键的就是处理按下方向键后，棋盘中数字的移动。以向左移动为例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;  <span class="comment">//处理第i行</span></span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k + <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其余移动原理相同，不再赘述。</p>
<h4 id="判断游戏输赢"><a href="#判断游戏输赢" class="headerlink" title="判断游戏输赢"></a>判断游戏输赢</h4><p><code>CheckGame()</code>函数用来判断游戏输赢：</p>
<ul>
<li>若棋盘上有数字达到2048则<strong>胜利</strong></li>
<li>若棋盘已满且无法移动（任何两个相邻的数都不相同）则<strong>失败</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == <span class="number">2048</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;                                 <span class="comment">// win</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> (count_of_zero)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;                                         <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == gameMap[i + <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i - <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j + <span class="number">1</span>]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;                                 <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;                                            <span class="comment">// lose</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="打印棋盘-amp-更新棋盘"><a href="#打印棋盘-amp-更新棋盘" class="headerlink" title="打印棋盘&amp;更新棋盘"></a>打印棋盘&amp;更新棋盘</h4><ul>
<li>尽量减少<code>system(&quot;pause&quot;)</code>语句的运用，能减少屏幕闪烁的情况。</li>
<li><code>PrintNumber</code>函数用来格式化地打印格子中的数</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;  %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">100</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%4d│&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ┌────┬────┬────┬────┐\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;       │&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    │&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= <span class="number">3</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       ├────┼────┼────┼────┤\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       └────┴────┴────┴────┘\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[Q] Back to menu.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span> &#123;  <span class="comment">//棋盘不用重新打印</span></span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            Goto(<span class="number">3</span> + <span class="number">5</span> * j, i * <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    &quot;</span>);<span class="comment">//4:</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="游戏进行"><a href="#游戏进行" class="headerlink" title="游戏进行"></a>游戏进行</h4><ul>
<li>判断是新游戏模式还是旧游戏模式，如果是新游戏，则要初始化棋盘</li>
<li>处理键盘输入，进行数字的移动并生成新的数字</li>
<li>每次判断游戏是否结束</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (game_type == <span class="number">1</span>) &#123;</span><br><span class="line">        InitGameMap();   <span class="comment">//new game</span></span><br><span class="line">        have_old_game = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> haveMap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!haveMap) &#123;</span><br><span class="line">            ShowMap();</span><br><span class="line">            haveMap = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            UpdateMap();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> state = CheckGame();</span><br><span class="line">        <span class="keyword">if</span> (CheckGame() == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Win!\n&quot;</span>);</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (CheckGame() == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Lose!\n&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                MoveUp();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                MoveDown();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> LEFT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                MoveLeft();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RIGHT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                MoveRight();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">                haveMap = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (count_of_zero &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (total &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">                        gameMap[x][y] = num;</span><br><span class="line">                        total++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="菜单界面"><a href="#菜单界面" class="headerlink" title="菜单界面"></a>菜单界面</h4><p>菜单界面<code>Menu()</code>要处理通过上下键或[W][S]键选择模式。<code>ShowMenu(x)</code>函数用来打印当前选择了$$x$$号模式时的菜单界面。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    <span class="type">int</span> print_X = <span class="number">14</span>;</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ____   ___  _  _    ___  \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |___ \\ / _ \\| || |  ( _ ) \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;        __) | | | | || |_ / _ \\ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       / __/| |_| |__   _| (_) |\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |_____|\\___/   |_|  \\___/ \n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1.New Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">8</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2.Old Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3.Exit\n&quot;</span>);</span><br><span class="line">    Goto(print_X - <span class="number">1</span>, <span class="number">6</span> + x);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">    Goto(<span class="number">3</span>, <span class="number">11</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please type [UP][DOWN] or [w][s] \nto choose your game.\n   Type [ENTER] to enter the game.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> now_point = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> last_point = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> haveMenu = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!haveMenu) &#123;</span><br><span class="line">            ShowMenu(now_point);</span><br><span class="line">            haveMenu = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + now_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + last_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = (now_point + <span class="number">1</span>) % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = now_point % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ENTER:</span><br><span class="line">                <span class="keyword">if</span> (now_point &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    haveMenu = <span class="number">0</span>;</span><br><span class="line">                    Game(now_point);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ROW 6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COL 6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_ROW 40</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_COL 30</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UP 72</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DOWN 80</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LEFT 75</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RIGHT 77</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENTER 13</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> n = <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> best = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> gameMap[ROW][COL];</span><br><span class="line"><span class="type">int</span> have_old_game = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span>;     <span class="comment">// begin the game</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveRight</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveUp</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveDown</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    PreWork();</span><br><span class="line">    Menu();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span> &#123;</span><br><span class="line">    CONSOLE_CURSOR_INFO curInfo;</span><br><span class="line">    curInfo.dwSize = <span class="number">1</span>;</span><br><span class="line">    curInfo.bVisible = FALSE;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorInfo(handle, &amp;curInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    COORD pos;</span><br><span class="line">    pos.X = x;</span><br><span class="line">    pos.Y = y;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorPosition(handle, pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;title 2048&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;mode con cols=40 lines=21&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;chcp 65001 &gt; nul&quot;</span>);  <span class="comment">//Chinese</span></span><br><span class="line">    HideCursor();</span><br><span class="line">    CONSOLE_FONT_INFOEX cfi;</span><br><span class="line">    cfi.cbSize = <span class="keyword">sizeof</span> cfi;</span><br><span class="line">    cfi.nFont = <span class="number">0</span>;</span><br><span class="line">    cfi.dwFontSize.X = <span class="number">15</span>;</span><br><span class="line">    cfi.dwFontSize.Y = <span class="number">30</span>;</span><br><span class="line">    cfi.FontFamily = FF_DONTCARE;</span><br><span class="line">    cfi.FontWeight = FW_NORMAL;</span><br><span class="line">    SetCurrentConsoleFontEx(GetStdHandle(STD_OUTPUT_HANDLE), FALSE, &amp;cfi);</span><br><span class="line">    srand((<span class="type">unsigned</span>) time(<span class="literal">NULL</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span> &#123;</span><br><span class="line">    score = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(gameMap, <span class="number">-1</span>, <span class="keyword">sizeof</span>(gameMap));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (total &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">            gameMap[x][y] = num;</span><br><span class="line">            total++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;  %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">100</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%4d│&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ┌────┬────┬────┬────┐\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;       │&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    │&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= <span class="number">3</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       ├────┼────┼────┼────┤\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       └────┴────┴────┴────┘\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[Q] Back to menu.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span> &#123;</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            Goto(<span class="number">3</span> + <span class="number">5</span> * j, i * <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    &quot;</span>);<span class="comment">//4:</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k + <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveRight</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k - <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k - <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k--;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveUp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[j][i]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[k][i]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[k][i] = gameMap[j][i];</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[k][i] != gameMap[j][i]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[k + <span class="number">1</span>][i] = gameMap[j][i];</span><br><span class="line">                        gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[k][i] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[k][i];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveDown</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[j][i]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[k][i]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[k][i] = gameMap[j][i];</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[k][i] != gameMap[j][i]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k - <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[k - <span class="number">1</span>][i] = gameMap[j][i];</span><br><span class="line">                        gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">// merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[k][i] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[k][i];</span><br><span class="line">                    k--;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * check if the player wins or loses the game.</span></span><br><span class="line"><span class="comment"> * @return 1 if win,-1 if lose, 0 if continue</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == <span class="number">2048</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;                                 <span class="comment">// win</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> (count_of_zero)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;                                         <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == gameMap[i + <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i - <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j + <span class="number">1</span>]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;                                 <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;                                            <span class="comment">// lose</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (game_type == <span class="number">1</span>) &#123;</span><br><span class="line">        InitGameMap();   <span class="comment">//new game</span></span><br><span class="line">        have_old_game = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> haveMap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!haveMap) &#123;</span><br><span class="line">            ShowMap();</span><br><span class="line">            haveMap = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            UpdateMap();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> state = CheckGame();</span><br><span class="line">        <span class="keyword">if</span> (CheckGame() == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Win!\n&quot;</span>);</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (CheckGame() == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Lose!\n&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                MoveUp();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                MoveDown();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> LEFT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                MoveLeft();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RIGHT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                MoveRight();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">                haveMap = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (count_of_zero &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (total &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">                        gameMap[x][y] = num;</span><br><span class="line">                        total++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    <span class="type">int</span> print_X = <span class="number">14</span>;</span><br><span class="line">    <span class="comment">/*Goto(16, 3);</span></span><br><span class="line"><span class="comment">    printf(&quot;2 0 4 8\n&quot;);*/</span></span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ____   ___  _  _    ___  \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |___ \\ / _ \\| || |  ( _ ) \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;        __) | | | | || |_ / _ \\ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       / __/| |_| |__   _| (_) |\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |_____|\\___/   |_|  \\___/ \n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1.New Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">8</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2.Old Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3.Exit\n&quot;</span>);</span><br><span class="line">    Goto(print_X - <span class="number">1</span>, <span class="number">6</span> + x);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">    Goto(<span class="number">3</span>, <span class="number">11</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please type [UP][DOWN] or [w][s] \nto choose your game.\n   Type [ENTER] to enter the game.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> now_point = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> last_point = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> haveMenu = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!haveMenu) &#123;</span><br><span class="line">            ShowMenu(now_point);</span><br><span class="line">            haveMenu = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + now_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + last_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = (now_point + <span class="number">1</span>) % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = now_point % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ENTER:</span><br><span class="line">                <span class="keyword">if</span> (now_point &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    haveMenu = <span class="number">0</span>;</span><br><span class="line">                    Game(now_point);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>C语言程序设计</tag>
      </tags>
  </entry>
  <entry>
    <title>配置online vscode</title>
    <url>/2022/03/20/online-vscode/</url>
    <content><![CDATA[<p>前段时间购入了一台华为Matepad11，真的非常的香。但是对于经常写代码又不想随时背着笔记本电脑的软院学生而言，遗憾的是，平板上并没有好的代码编辑器。</p>
<p>于是，在云服务器上部署一个online代码编辑器的想法诞生了。</p>
<p>本人用的是大一上学期双十一期间购入的腾讯云轻量应用服务器，最近还免费升级到了4核4G，很赞。</p>
<h3 id="利用docker安装online-vscode"><a href="#利用docker安装online-vscode" class="headerlink" title="利用docker安装online vscode"></a>利用docker安装online vscode</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name=code-server \</span><br><span class="line">  -e PUID=1000 \</span><br><span class="line">  -e PGID=1000 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e PASSWORD= \</span><br><span class="line">  -e SUDO_PASSWORD= \</span><br><span class="line">  -p 8080:8443 \</span><br><span class="line">  -v /path/to/appdata/config:/config \</span><br><span class="line">  -v /root/vscode:/vscode \</span><br><span class="line">  --restart unless-stopped \</span><br><span class="line">  lscr.io/linuxserver/code-server</span><br></pre></td></tr></table></figure>

<h3 id="设置腾讯云防火墙"><a href="#设置腾讯云防火墙" class="headerlink" title="设置腾讯云防火墙"></a>设置腾讯云防火墙</h3><p>启动docker以后还是无法在<code>http:IP地址:8080</code>中访问online vscode, 原因是没有在云服务器的防火墙中添加新的规则，开放端口</p>
<p><img src="/..%5Cimages%5Cimage-20220320212651339.png" alt="image-20220320212651339"></p>
<p>现在再次访问<code>http:IP地址:8080</code>就可以跳转到登陆界面了，输入之前PASSWORD设置的密码就可以登陆了。</p>
<p><img src="/..%5Cimages%5Cimage-20220320213047933.png" alt="image-20220320213047933"></p>
<h3 id="安装Gcc、Python"><a href="#安装Gcc、Python" class="headerlink" title="安装Gcc、Python"></a>安装Gcc、Python</h3><p>然而，新建的docker里十分干净，连可怜的gcc都没有，于是开始安装。</p>
<ol>
<li><p>首先先进入docker</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it code-server /bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新源，安装<code>wget</code>、<code>ping</code>、<code>ifconfig</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install wget</span><br><span class="line">apt-get install inetutils-ping</span><br><span class="line">apt-get install net-tools</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装gcc</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install gcc </span><br></pre></td></tr></table></figure>
</li>
<li><p>安装python</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install python3</span><br></pre></td></tr></table></figure></li>
</ol>
<p>之后我还顺便安装了<code>jdk</code>,主要就是敲敲指令，就不多赘述了。</p>
<p>现在我得到了一个可以直接在网页访问的、好用的在线IDE了。</p>
<p><img src="/..%5Cimages%5Cimage-20220320214141660.png" alt="image-20220320214141660"></p>
]]></content>
      <tags>
        <tag>云服务器学习生活</tag>
      </tags>
  </entry>
</search>
